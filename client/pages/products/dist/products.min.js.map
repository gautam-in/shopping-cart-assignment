{"version":3,"sources":["products.js"],"names":["products","cart","SERVER","PORT","fetchData","type","fetch","concat","then","response","ok","json","data","err","console","log","renderCategoryList","categoryList","template","index","categoryContainer","regeneratorRuntime","async","_context","prev","next","awrap","sent","length","enabled","id","name","document","getElementById","innerHTML","addEventListener","e","element","target","hasAttribute","renderProductsList","getAttribute","stop","categoryId","currentProducts","charAt","substring","filter","d","category","imageURL","description","price","productId","product","showCart","Cart","render","dropdownOnChange","window","location","search"],"mappings":"8dAAA,IAAIA,SACAC,KACEC,OAAS,mBACTC,KAAO,OAEb,SAASC,UAAUC,GACf,OAAOC,MAAK,GAAAC,OAAIL,OAAJ,KAAAK,OAAcJ,KAAd,KAAAI,OAAsBF,IACjCG,KAAK,SAACC,GACH,GAAGA,EAASC,GACR,OAAOD,EAASE,OAR5B,KAAA,yBACMT,KAAM,SAAAU,GAAG,OAAAA,IAIJ,MAHE,SAAAC,GAAA,OAAbC,QAAAC,IAAAF,KAGI,SAAYG,qBAAZ,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,MAEmBtB,UAAA,eAFnB,KAAA,EAIK,IAFEK,EAFPc,EAAAI,KAGQT,EAAOT,GACVU,EAAA,EAAAA,EAAAF,EAAAW,OAAAT,IAUEF,EAAaE,GAAOU,UATjBX,GAAA,4CAAAX,OACEU,EAAAE,GAAAW,GADF,mCAAAvB,OAEAU,EAAAE,GAAAW,GAFA,MAAAvB,OAEAU,EAAAE,GAAAY,KAFA,+CAKdX,EAAAY,SAAAC,eAAA,mBAAAC,WAAAhB,EAAAE,EAAAe,iBAAA,QAAA,SAAAC,GAAA,IAAAC,EAAAD,EAAAE,OAAAD,EAAAE,aAAA,QAAAC,mBAAAH,EAAAI,aAAA,UAVI,KAAA,EAAA,IAAA,MAAA,OAAAlB,EAAAmB,UAWIzB,SAAAA,mBADR0B,GACQ1B,IAAAA,EAAAA,EAAAA,EAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,MAwBab,UAAU,aAxBvBa,KAAAA,EAmCJ,IAXAjB,SAxBIiB,EAAAA,KAEJC,EAAQC,GAQHyB,EAPDD,GACIzB,EAAQ,KAARA,EAAQ2B,OAAA,GAAAF,EAAAG,UAAA,GAAAH,EAMX3C,SAAA+C,OAAA,SAAAC,GACJ,GAAAA,EAAAC,WAAAN,EAAA,OAAAK,KAED5B,mBAAkBc,UAsBVf,EAAQ,EAAGA,EAAMyB,EAAgBhB,OAAQT,IAnB7CD,GAAGmB,0GAAAA,OAwBWO,EAAgBzB,GAAOY,KAxBlCM,uIAAAA,OAjBXO,EAAAzB,GAAA+B,SAiBWb,WAAAA,OAjBXO,EAAAzB,GAAAY,KAiBWM,oIAAAA,OAjBXO,EAAAzB,GAAAgC,YAiBWd,qIAAAA,OAMXO,EAAAzB,GAAAiC,MANWf,mEAAAA,OAMXO,EAAAzB,GAAAW,GANWO,wJAMXL,SAAAC,eAAA,uBAE+BC,UAF/BhB,EAtBQD,KAAAA,EAAAA,IAAAA,MAAAA,OAAAA,EAAAA,UAyBAC,SAAAA,WAHRmC,GAuCI,IAAIC,EAAUtD,SAAS+C,OAAO,SAAAC,GAAM,GAAGK,IAAcL,EAAElB,GAAI,OAAOkB,IAnClE/C,QACI0C,KAAAA,IAAAA,KAAU,GAAGA,IACbC,SACI3C,KAAAsD,YAGJX,KAAAA,YAAAA,GAIA1B,SAAAA,WAoBAc,OAlCR/B,KAAA,IAAAuD,KAAA,GAAA,IAAAC,SAmCKxD,KAAAsD,WAnCL,SAAAG,iBAAAtB,GAsCAI,mBAuBe,IAAIJ,GAtBsDpB,qBA2BzEwB,mBAAmBmB,OAAOC,SAASC","file":"products.min.js","sourcesContent":["let products;\nlet cart;\nconst SERVER = 'http://localhost';\nconst PORT = '5001';\n\nfunction fetchData(type){\n    return fetch(`${SERVER}:${PORT}/${type}`)\n    .then((response) => {\n        if(response.ok){\n            return response.json(); \n        }\n        throw \"Something Went Wrong\"\n    }).then(data => data)\n    .catch(err => console.log(err));\n}\n\nasync function renderCategoryList(){\n    let categoryList = await fetchData('categories')\n    let template = ''\n    for(let index = 0;index < categoryList.length; index++){\n        if(categoryList[index].enabled){\n            template += \n            `\n            <div class=\"category\" key=\"${categoryList[index].id}\">\n                <span key=\"${categoryList[index].id}\">${categoryList[index].name}</span>\n            </div>\n            `\n        }\n    }\n    let categoryContainer = document.getElementById('category__list');\n    categoryContainer.innerHTML += template;\n    categoryContainer.addEventListener('click', function(e){\n        let element = e.target;\n        if(element.hasAttribute('key')){\n            renderProductsList(element.getAttribute('key'));\n        }\n    })\n}\n\nasync function renderProductsList(categoryId){\n    let currentProducts;\n    products = await fetchData('products')\n    let template = '';\n    if(categoryId){\n        categoryId = categoryId.charAt(0) == '?' ? categoryId.substring(1) : categoryId;\n        currentProducts = products.filter(d => {\n            if(d.category === categoryId) return d;\n        })\n    }else{\n        currentProducts = [...products];\n    }\n\n    for(let index = 0; index<currentProducts.length; index++){\n        template += \n        `\n        <div class=\"product__card\">\n            <div class=\"product__heading\">\n                <h3>${currentProducts[index].name}</h3>\n            </div>\n            <div class=\"product__subcard\">\n                <img width=\"250\" height=\"250\" src=\"../../../${currentProducts[index].imageURL}\" alt=\"${currentProducts[index].name}\"/>\n                <div class=\"product__desc\">\n                    <div class=\"product__detail\">\n                        <p>${currentProducts[index].description}</p>\n                    </div>\n                    <div class=\"product__price\">\n                        <span id=\"price\">Rs. ${currentProducts[index].price}</span>\n                        <button onclick=\"buyProduct('${currentProducts[index].id}')\">Buy Now <span id=\"atsymbol\">@</span></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `;\n        document.getElementById('products__container').innerHTML = template;\n    }\n}\n\nfunction buyProduct(productId){\n    let product = products.filter(d => {if(productId === d.id) return d;})\n    if(!cart){\n        cart = new Cart([], 1)\n        cart.render()\n        cart.showCart()\n        cart.addCartItem(product)\n    }else{\n        cart.addCartItem(product)\n    }\n}\n\nfunction openCart(){\n    if(cart)\n        cart.showCart()\n    else{\n        cart = new Cart([], 0)\n        cart.render()\n        cart.showCart()\n    }\n}\n\nfunction dropdownOnChange(e){\n    const id = '?'+e;\n    renderProductsList(id);\n}\n\nrenderCategoryList();\nrenderProductsList(window.location.search);"]}