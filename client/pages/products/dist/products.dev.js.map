{"version":3,"sources":["products.js"],"names":["products","cart","SERVER","PORT","fetchData","type","fetch","then","response","ok","json","data","err","console","log","renderCategoryList","categoryList","template","index","length","enabled","id","name","categoryContainer","document","getElementById","innerHTML","addEventListener","e","element","target","hasAttribute","renderProductsList","getAttribute","categoryId","charAt","substring","currentProducts","filter","d","category","imageURL","description","price","buyProduct","productId","product","Cart","render","showCart","addCartItem","openCart","dropdownOnChange","window","location","search"],"mappings":"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","sourcesContent":["let products;\nlet cart;\nconst SERVER = 'http://localhost';\nconst PORT = '5001';\n\nfunction fetchData(type){\n    return fetch(`${SERVER}:${PORT}/${type}`)\n    .then((response) => {\n        if(response.ok){\n            return response.json(); \n        }\n        throw \"Something Went Wrong\"\n    }).then(data => data)\n    .catch(err => console.log(err));\n}\n\nasync function renderCategoryList(){\n    let categoryList = await fetchData('categories')\n    let template = ''\n    for(let index = 0;index < categoryList.length; index++){\n        if(categoryList[index].enabled){\n            template += \n            `\n            <div class=\"category\" key=\"${categoryList[index].id}\">\n                <span key=\"${categoryList[index].id}\">${categoryList[index].name}</span>\n            </div>\n            `\n        }\n    }\n    let categoryContainer = document.getElementById('category__list');\n    categoryContainer.innerHTML += template;\n    categoryContainer.addEventListener('click', function(e){\n        let element = e.target;\n        if(element.hasAttribute('key')){\n            renderProductsList(element.getAttribute('key'));\n        }\n    })\n}\n\nasync function renderProductsList(categoryId){\n    let currentProducts;\n    products = await fetchData('products')\n    let template = '';\n    if(categoryId){\n        categoryId = categoryId.charAt(0) == '?' ? categoryId.substring(1) : categoryId;\n        currentProducts = products.filter(d => {\n            if(d.category === categoryId) return d;\n        })\n    }else{\n        currentProducts = [...products];\n    }\n\n    for(let index = 0; index<currentProducts.length; index++){\n        template += \n        `\n        <div class=\"product__card\">\n            <div class=\"product__heading\">\n                <h3>${currentProducts[index].name}</h3>\n            </div>\n            <div class=\"product__subcard\">\n                <img width=\"250\" height=\"250\" src=\"../../../${currentProducts[index].imageURL}\" alt=\"${currentProducts[index].name}\"/>\n                <div class=\"product__desc\">\n                    <div class=\"product__detail\">\n                        <p>${currentProducts[index].description}</p>\n                    </div>\n                    <div class=\"product__price\">\n                        <span id=\"price\">Rs. ${currentProducts[index].price}</span>\n                        <button onclick=\"buyProduct('${currentProducts[index].id}')\">Buy Now <span id=\"atsymbol\">@</span></button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `;\n        document.getElementById('products__container').innerHTML = template;\n    }\n}\n\nfunction buyProduct(productId){\n    let product = products.filter(d => {if(productId === d.id) return d;})\n    if(!cart){\n        cart = new Cart([], 1)\n        cart.render()\n        cart.showCart()\n        cart.addCartItem(product)\n    }else{\n        cart.addCartItem(product)\n    }\n}\n\nfunction openCart(){\n    if(cart)\n        cart.showCart()\n    else{\n        cart = new Cart([], 0)\n        cart.render()\n        cart.showCart()\n    }\n}\n\nfunction dropdownOnChange(e){\n    const id = '?'+e;\n    renderProductsList(id);\n}\n\nrenderCategoryList();\nrenderProductsList(window.location.search);"],"file":"products.dev.js"}